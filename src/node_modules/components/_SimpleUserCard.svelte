<script>
  import './meta.scss';
  import { infos } from '../../stores/infoStore';
  import UserGraphic from './_UserGraphic.svelte';
  import Circle from './_Circle.svelte';
  import { Item, Text, PrimaryText, SecondaryText } from '@smui/list';

  export let selectionUserId = null;
  export let user;
  export { className as class };

  let className = '';

  $: _infos = ($infos.has(user.id) && $infos.get(user.id).params) || [];
</script>

<Item class={className} selected={selectionUserId == user.id}>
  <UserGraphic width="40" height="40" {user} border badge={user.protected && 'lock'} />
  <Text>
    <PrimaryText>{user.name}</PrimaryText>
    <SecondaryText>{user.email}</SecondaryText>
  </Text>
  <div class="infos">
    {#each _infos as _info}
      <Circle size="5" color={_info.flag} />
    {/each}
  </div>
</Item>

<style>
  .infos {
    margin-left: auto;
    margin-right: 0;
  }
</style>
