<script>
  import { stores } from "@sapper/app";
  import { getContext } from "svelte";

  export let segment = null;
  export let href = null;
  export let external = null;
  export let title = null;

  const { page } = stores();
  const current = getContext("nav");

  $: active = $current === segment;
  $: console.log($page)
</script>

{#if external}
  <li>
    <a target="_blank" href={external} {title}><slot /></a>
  </li>
{:else}
  <li class:active>
    <a aria-current={$page.path.startsWith(href) ? true : undefined} rel="prefetch" href={href} {title}
      ><slot /></a
    >
  </li>
{/if}

<style>
  [aria-current="true"] {
    color: var(--prime);
  }
</style>
