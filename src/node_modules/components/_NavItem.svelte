<script>
  import { stores } from "@sapper/app";
  import { getContext } from "svelte";

  export let segment = null;
  export let href = null;
  export let external = null;
  export let title = null;
  export let style = "";
  export { className as class };

  const { page } = stores();
  const current = getContext("nav");
  let className = "";

  $: active = $current === segment;
</script>

{#if external}
  <li class="nav-item" class:className>
    <a target="_blank" href={external} {title}><slot /></a>
  </li>
{:else}
  <li class:active class="nav-item {className}">
    <a
      aria-current={$page.path.startsWith(href) ? true : undefined}
      sveltekit:prefetch
      {style}
      {href}
      {title}><slot /></a
    >
  </li>
{/if}

<style>
  [aria-current="true"] {
    color: var(--prime);
  }
</style>
