<script>
  import { onMount, onDestroy } from 'svelte';
  import { mails } from '../../stores/mailStore';
  import { inboxes } from '../../stores/inboxStore';
  import List from '@smui/list';
  import SimpleMailCard from './_SimpleMailCard.svelte';
  import { _ } from 'svelte-i18n';

  export let type;
  export let selected;
  export let sort = 'DESC';
  
  let selectionIndex;

  $: sortBit = sort === 'DESC' ? -1 : sort === 'ASC' ? 1 : 0;
  $: _mails = type === 'inboxes' ? $inboxes : type === 'mails' ? $mails : [];
  $: _mails = _mails.sort((a, b) => sortBit * (new Date(a.created) - new Date(b.created)));

  onMount(() => {});
  onDestroy(() => {});
</script>

<List class="mails-list {type}" twoLine avatarList singleSelection bind:selectedIndex={selectionIndex}>
  {#each _mails as mail (mail.id)}
    <SimpleMailCard on:mail:toggleRead bind:selected {mail} {type} />
  {/each}
</List>

<style>
</style>
