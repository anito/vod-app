<script>
  import './chip.scss';
  import { stores } from '@sapper/app';
  import { infos } from '../../stores/infoStore';
  import Chip, { Icon, Text } from '@smui/chips';

  export let selectionUserId;
  export let bMargin = false;
  export { className as class };

  const defaultIcon = 'circle_notifications';

  let className = '';

  $: _infos = ($infos.has(selectionUserId) && $infos.get(selectionUserId).params) || [];
  $: getIcon = (flag) => {
    let icon;
    switch (flag) {
      case 'info':
        icon = 'info';
        break;
      case 'warning':
        icon = 'error';
        break;
      default:
        icon = defaultIcon;
    }
    return icon;
  };
</script>

{#if _infos.length}
  <div class="chips {className}">
    {#each _infos as _info}
      <div class="chip {bMargin ? 'mb-1' : ''}">
        <Chip class="{_info.flag} {className}">
          <Icon class="material-icons" leading>{getIcon(_info.flag)}</Icon>
          <Text>{_info.label}</Text>
        </Chip>
      </div>
    {/each}
  </div>
{:else}
  <div class="empty">
    <div class="">Keine Mitteilungen</div>
  </div>
{/if}

<style>
  .chips {
    display: inline-flex;
    flex-wrap: wrap;
  }
  .chip {
    margin-right: 5px;
  }
</style>
