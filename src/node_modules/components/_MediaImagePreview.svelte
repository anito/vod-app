<script>
    import { Media } from '@smui/card';
    import { getExt, getMedia, getImage } from 'utils';
    
    const posterUrl = `https://via.placeholder.com/320x180.png?text=`;

    export let media = {};
    export let user;

    let preview;
    let poster = (media && `${posterUrl}${getExt(media.src)}`) ||Â posterUrl;

    async function getPosterUrl(id) {
        if(!id) return false;
		let res = await getMedia('IMAGE', id, user, {width:300, height:300, square: 0});
		// let res = await getImage(id, user, {width:300, height:300, square: 0});
		if(res) poster = res;
    }

    media && getPosterUrl(media.id);

</script>

<style>

</style>
<Media aspectRatio="16x9" style="background-image:url({poster})"/>